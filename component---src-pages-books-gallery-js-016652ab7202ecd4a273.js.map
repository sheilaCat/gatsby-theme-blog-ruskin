{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es6.string.small.js","webpack:///./node_modules/core-js/modules/_string-html.js","webpack:///./src/pages/books-gallery.js","webpack:///./node_modules/core-js/modules/es7.object.values.js"],"names":["createHTML","this","$export","fails","defined","quot","string","tag","attribute","value","S","String","p1","replace","module","exports","NAME","exec","O","P","F","test","toLowerCase","split","length","props","source","collections","readBooks","filter","c","Date","updated","getFullYear","drawChart","setTimeout","drawCategoryChart","root","py","h1","columns","map","startNum","Math","floor","book","rating","average","max","href","alt","target","img","sx","height","width","borderRadius","src","images","small","fontSize","title","color","slice","opacity","flex","id","style","myChart","window","echarts","init","document","getElementById","status","res","updateDate","month","getMonth","option","text","left","bottom","textStyle","grid","top","right","containLabel","xAxis","type","boundaryGap","data","Object","keys","axisLabel","margin","axisLine","show","axisTick","lineStyle","splitLine","yAxis","position","series","name","smooth","showAllSymbol","symbol","symbolSize","normal","label","itemStyle","borderColor","borderWidth","tooltip","areaStyle","graphic","LinearGradient","offset","values","setOption","colors","star5","star4","star3","star2","dataMap","priority","forEach","priorityTag","tags","sort","a","b","localeCompare","p","tagName","star","push","children","list","i","books","item","j","level1","bookScoreId","block","bookScore","downplay","backgroundColor","center","depth","getValue","dataIndex","rotate","levels","r0","r","shadowBlur","shadowColor","textShadowBlur","textShadowColor","$values","it"],"mappings":"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","file":"component---src-pages-books-gallery-js-016652ab7202ecd4a273.js","sourcesContent":["'use strict';\n// B.2.3.11 String.prototype.small()\nrequire('./_string-html')('small', function (createHTML) {\n  return function small() {\n    return createHTML(this, 'small', '', '');\n  };\n});\n","var $export = require('./_export');\nvar fails = require('./_fails');\nvar defined = require('./_defined');\nvar quot = /\"/g;\n// B.2.3.2.1 CreateHTML(string, tag, attribute, value)\nvar createHTML = function (string, tag, attribute, value) {\n  var S = String(defined(string));\n  var p1 = '<' + tag;\n  if (attribute !== '') p1 += ' ' + attribute + '=\"' + String(value).replace(quot, '&quot;') + '\"';\n  return p1 + '>' + S + '</' + tag + '>';\n};\nmodule.exports = function (NAME, exec) {\n  var O = {};\n  O[NAME] = exec(createHTML);\n  $export($export.P + $export.F * fails(function () {\n    var test = ''[NAME]('\"');\n    return test !== test.toLowerCase() || test.split('\"').length > 3;\n  }), 'String', O);\n};\n","/** @jsx jsx */\n\nimport { jsx, Styled, Box, Container, AspectImage, Avatar, Text, Grid, Link, NavLink, Button, Flex} from 'theme-ui'\n\nimport React from 'react'\nimport {  useStaticQuery, graphql } from 'gatsby'\nimport { Layout } from 'gatsby-theme-ui-layout'\n\nimport source from './books-sources.json'\n \n\nexport default props => {\n \n\n  const {collections = []} = source;\n  const isShowMore = false;\n  const readBooks = collections.filter(c => new Date(c.updated).getFullYear() === 2020);\n\n\n  drawChart();\n  setTimeout(() => {\n    drawCategoryChart()\n  }, 1000)\n  \n  return (\n  <Styled.root>\n    <Layout {...props}>\n    <Container>\n      <Box py={40}>\n        <Styled.h1>Reading</Styled.h1>\n        <Grid columns={10}>\n          {\n            readBooks.map(c => {\n              const startNum = Math.floor(c.book.rating.average / c.book.rating.max * 10 / 2)\n              return (\n              <NavLink href={c.book.alt} target=\"_blank\">\n                <Styled.img sx={{height: '9em', width: '7em', borderRadius: 8}}  src={'https://images.weserv.nl/?url=' + c.book.images.small.replace('https://', '')} />\n                <Text sx={{fontSize: '.6em'}}>{c.book.title}</Text>\n                <Flex>\n                  <Text sx={{fontSize: '.5em', color: '#FFCC66'}}>{'★★★★★'.slice(0, startNum)}</Text>\n                  <Text sx={{fontSize: '.5em', color: '#fff', opacity: .3, flex: 1}}>{'★★★★★'.slice(0, 5 - startNum)}</Text>\n                </Flex>\n              </NavLink>\n            )})\n          }\n        </Grid>\n      </Box>\n      <div id=\"main\" style={{width: 600, height: 400}} ></div>\n      <div id=\"chart\" style={{width: 800, height: 600}} ></div>\n    </Container>\n    </Layout>\n  \n      \n  </Styled.root>\n  )\n}\n\n\nconst drawChart = () => {\n\n  setTimeout(() => {\n\n    var myChart = window.echarts.init(document.getElementById('main'));\n\n    // 筛选出 2020已读书目\n    const {collections = []} = source;\n    const readBooks = collections.filter(c => c.status === 'read');\n\n    let res = {}\n    readBooks.map(book => {\n      let updateDate = new Date(book.updated);\n      if (updateDate.getFullYear() === 2020) {\n        const month = updateDate.getMonth() + 1;\n\n        if (res[month]) {\n          res[month]++\n        } else {\n          res[month] = 1\n        } \n      }\n    })\n\n    // 得到月份和对应的书目\n\n    \n    // 指定图表的配置项和数据\n    var option = {\n      title: {\n          text: \"2020 Read\",\n          left: \"center\",\n          bottom: \"5%\",\n          textStyle: {\n              color: \"#fff\",\n              fontSize: 16\n          }\n      },\n      grid: {\n          top: '20%',\n          left: '10%',\n          right: '10%',\n          bottom: '15%',\n          containLabel: true,\n      },\n      xAxis: {\n          type: 'category',\n          boundaryGap: false,\n          data: Object.keys(res),\n          axisLabel: {\n              margin: 30,\n              color: '#ffffff63'\n          },\n          axisLine: {\n              show: false\n          },\n          axisTick: {\n              show: true,\n              length: 25,\n              lineStyle: {\n                  color: \"#ffffff1f\"\n              }\n          },\n          splitLine: {\n              show: true,\n              lineStyle: {\n                  color: '#ffffff1f'\n              }\n          }\n      },\n      yAxis: [{\n          type: 'value',\n          position: 'right',\n          axisLabel: {\n              margin: 20,\n              color: '#ffffff63'\n          },\n  \n          axisTick: {\n              show: true,\n              length: 15,\n              lineStyle: {\n                  color: \"#ffffff1f\",\n              }\n          },\n          splitLine: {\n              show: true,\n              lineStyle: {\n                  color: '#ffffff1f'\n              }\n          },\n          axisLine: {\n              lineStyle: {\n                  color: '#fff',\n                  width: 2\n              }\n          }\n      }],\n      series: [{\n          name: '注册总量',\n          type: 'line',\n          smooth: true, //是否平滑曲线显示\n          showAllSymbol: true,\n          symbol: 'circle',\n          symbolSize: 6,\n          lineStyle: {\n              normal: {\n                  color: \"#fff\", // 线条颜色\n              },\n          },\n          label: {\n              show: true,\n              position: 'top',\n              textStyle: {\n                  color: '#fff',\n              }\n          },\n          itemStyle: {\n              color: \"red\",\n              borderColor: \"#fff\",\n              borderWidth: 3\n          },\n          tooltip: {\n              show: false\n          },\n          areaStyle: {\n              normal: {\n                  color: new window.echarts.graphic.LinearGradient(0, 0, 0, 1, [{\n                          offset: 0,\n                          color: '#eb64fb'\n                      },\n                      {\n                          offset: 1,\n                          color: '#3fbbff0d'\n                      }\n                  ], false),\n              }\n          },\n          data: Object.values(res),\n      }]\n  };\n  \n    // 使用刚指定的配置项和数据显示图表。\n    myChart.setOption(option);\n  }, 1000)\n  \n}\n\nconst drawCategoryChart = () => {\n\n  var myChart = window.echarts.init(document.getElementById('chart'));\n\n  var colors = ['#FFAE57', '#FF7853', '#EA5151', '#CC3F57', '#9A2555'];\n  var bgColor = '#2E2733';\n  \n  var itemStyle = {\n      star5: {\n          color: colors[0]\n      },\n      star4: {\n          color: colors[1]\n      },\n      star3: {\n          color: colors[2]\n      },\n      star2: {\n          color: colors[3]\n      }\n  };\n\n  // 先分类 后填色\n  // 根据书目的tags进行分类 优先归类某些tag\n  let dataMap = {};\n  let {collections} = source;\n\n  collections = collections.filter(c => new Date(c.updated).getFullYear() === 2020);\n\n  const priority = [\n    '推理', '科幻', '文学', \n    '互联网', '软件开发', \n    '心理', '心理学', '社会学', '社会',\n    '情感', \n    '小说',\n    '哲学', '经济', '艺术'\n  ]\n\n  collections.forEach(c => {\n\n    // 找到优先级的标签\n    let priorityTag = ''\n    // 先给tag排序\n    const tags = c.book.tags.sort((a, b) => {\n      return a.title.localeCompare(b.title)\n    })\n\n    priority.forEach(p => {\n      tags.forEach(tag => {\n        if (tag.title === p && !priorityTag) {\n          priorityTag = p\n        } \n      })\n    })\n\n    const tagName = priorityTag || '其它'\n    const name = c.book.title\n    const status = c.status\n\n    const star =  Math.floor(c.book.rating.average / c.book.rating.max * 10 / 2)\n    if (dataMap[tagName]) {\n      dataMap[tagName].push({star, name, status})\n    } else {\n      dataMap[tagName] = [{star, name, status}]\n    }\n  })\n\n  // 构建对应的数据结构\n  let children = []\n  for (var tagName in dataMap) {\n    const list = dataMap[tagName]\n\n    let res = [];\n    [1,2,3,4,5].forEach(i => {\n      const books = list.filter(item => item.star === i)\n      if (books && books.length) {\n        res.push({\n          name: i + '☆',\n          children: books\n        })\n      }\n    })\n\n    children.push({\n      name: tagName,\n      children: res\n    })\n  }\n\n  var data = [{\n    name: '阅读',\n    itemStyle: {\n        color: colors[1]\n    },\n    children\n  }]\n  \n  // var data = [{\n  //     name: '虚构',\n  //     itemStyle: {\n  //         color: colors[1]\n  //     },\n  //     children: [{\n  //         name: '小说',\n  //         children: [{\n  //             name: '5☆',\n  //             children: [{\n  //                 name: '疼'\n  //             }, {\n  //                 name: '慈悲'\n  //             }, {\n  //                 name: '楼下的房客'\n  //             }]\n  //         }, {\n  //             name: '4☆',\n  //             children: [{\n  //                 name: '虚无的十字架'\n  //             }, {\n  //                 name: '无声告白'\n  //             }, {\n  //                 name: '童年的终结'\n  //             }]\n  //         }, {\n  //             name: '3☆',\n  //             children: [{\n  //                 name: '疯癫老人日记'\n  //             }]\n  //         }]\n  //     }, {\n  //         name: '其他',\n  //         children: [{\n  //             name: '5☆',\n  //             children: [{\n  //                 name: '纳博科夫短篇小说全集'\n  //             }]\n  //         }, {\n  //             name: '4☆',\n  //             children: [{\n  //                 name: '安魂曲'\n  //             }, {\n  //                 name: '人生拼图版'\n  //             }]\n  //         }, {\n  //             name: '3☆',\n  //             children: [{\n  //                 name: '比起爱你，我更需要你'\n  //             }]\n  //         }]\n  //     }]\n  // }, {\n  //     name: '非虚构',\n  //     itemStyle: {\n  //         color: colors[2]\n  //     },\n  //     children: [{\n  //         name: '设计',\n  //         children: [{\n  //             name: '5☆',\n  //             children: [{\n  //                 name: '无界面交互'\n  //             }]\n  //         }, {\n  //             name: '4☆',\n  //             children: [{\n  //                 name: '数字绘图的光照与渲染技术'\n  //             }, {\n  //                 name: '日本建筑解剖书'\n  //             }]\n  //         }, {\n  //             name: '3☆',\n  //             children: [{\n  //                 name: '奇幻世界艺术\\n&RPG地图绘制讲座'\n  //             }]\n  //         }]\n  //     }, {\n  //         name: '社科',\n  //         children: [{\n  //             name: '5☆',\n  //             children: [{\n  //                 name: '痛点'\n  //             }]\n  //         }, {\n  //             name: '4☆',\n  //             children: [{\n  //                 name: '卓有成效的管理者'\n  //             }, {\n  //                 name: '进化'\n  //             }, {\n  //                 name: '后物欲时代的来临',\n  //             }]\n  //         }, {\n  //             name: '3☆',\n  //             children: [{\n  //                 name: '疯癫与文明'\n  //             }]\n  //         }]\n  //     }, {\n  //         name: '心理',\n  //         children: [{\n  //             name: '5☆',\n  //             children: [{\n  //                 name: '我们时代的神经症人格'\n  //             }]\n  //         }, {\n  //             name: '4☆',\n  //             children: [{\n  //                 name: '皮格马利翁效应'\n  //             }, {\n  //                 name: '受伤的人'\n  //             }]\n  //         }, {\n  //             name: '3☆',\n  //         }, {\n  //             name: '2☆',\n  //             children: [{\n  //                 name: '迷恋'\n  //             }]\n  //         }]\n  //     }, {\n  //         name: '居家',\n  //         children: [{\n  //             name: '4☆',\n  //             children: [{\n  //                 name: '把房子住成家'\n  //             }, {\n  //                 name: '只过必要生活'\n  //             }, {\n  //                 name: '北欧简约风格'\n  //             }]\n  //         }]\n  //     }, {\n  //         name: '绘本',\n  //         children: [{\n  //             name: '5☆',\n  //             children: [{\n  //                 name: '设计诗'\n  //             }]\n  //         }, {\n  //             name: '4☆',\n  //             children: [{\n  //                 name: '假如生活糊弄了你'\n  //             }, {\n  //                 name: '博物学家的神秘动物图鉴'\n  //             }]\n  //         }, {\n  //             name: '3☆',\n  //             children: [{\n  //                 name: '方向'\n  //             }]\n  //         }]\n  //     }, {\n  //         name: '哲学',\n  //         children: [{\n  //             name: '4☆',\n  //             children: [{\n  //                 name: '人生的智慧'\n  //             }]\n  //         }]\n  //     }, {\n  //         name: '技术',\n  //         children: [{\n  //             name: '5☆',\n  //             children: [{\n  //                 name: '代码整洁之道'\n  //             }]\n  //         }, {\n  //             name: '4☆',\n  //             children: [{\n  //                 name: 'Three.js 开发指南'\n  //             }]\n  //         }]\n  //     }]\n  // }];\n  \n  for (var j = 0; j < data.length; ++j) {\n      var level1 = data[j].children;\n      for (var i = 0; i < level1.length; ++i) {\n          var block = level1[i].children;\n          var bookScore = [];\n          var bookScoreId;\n          for (var star = 0; star < block.length; ++star) {\n              var style = (function (name) {\n                  switch (name) {\n                      case '5☆':\n                          bookScoreId = 0;\n                          return itemStyle.star5;\n                      case '4☆':\n                          bookScoreId = 1;\n                          return itemStyle.star4;\n                      case '3☆':\n                          bookScoreId = 2;\n                          return itemStyle.star3;\n                      case '2☆':\n                          bookScoreId = 3;\n                          return itemStyle.star2;\n                  }\n              })(block[star].name);\n  \n              block[star].label = {\n                  color: style.color,\n                  downplay: {\n                      opacity: 0.5\n                  }\n              };\n  \n              if (block[star].children) {\n                  style = {\n                      opacity: 1,\n                      color: style.color\n                  };\n                  block[star].children.forEach(function (book) {\n                      book.value = 1;\n                      book.itemStyle = style;\n  \n                      book.label = {\n                          color: style.color\n                      };\n  \n                      var value = 1;\n                      if (bookScoreId === 0 || bookScoreId === 3) {\n                          value = 5;\n                      }\n  \n                      if (bookScore[bookScoreId]) {\n                          bookScore[bookScoreId].value += value;\n                      }\n                      else {\n                          bookScore[bookScoreId] = {\n                              color: colors[bookScoreId],\n                              value: value\n                          };\n                      }\n                  });\n              }\n          }\n  \n          level1[i].itemStyle = {\n              color: data[j].itemStyle.color\n          };\n      }\n  }\n  \n  const option = {\n      backgroundColor: bgColor,\n      color: colors,\n      series: [{\n          type: 'sunburst',\n          center: ['50%', '48%'],\n          data: data,\n          sort: function (a, b) {\n              if (a.depth === 1) {\n                  return b.getValue() - a.getValue();\n              }\n              else {\n                  return a.dataIndex - b.dataIndex;\n              }\n          },\n          label: {\n              rotate: 'radial',\n              color: bgColor\n          },\n          itemStyle: {\n              borderColor: bgColor,\n              borderWidth: 2\n          },\n          levels: [{}, {\n              r0: 0,\n              r: 40,\n              label: {\n                  rotate: 0\n              }\n          }, {\n              r0: 40,\n              r: 105\n          }, {\n              r0: 115,\n              r: 140,\n              itemStyle: {\n                  shadowBlur: 2,\n                  shadowColor: colors[2],\n                  color: 'transparent'\n              },\n              label: {\n                  rotate: 'tangential',\n                  fontSize: 10,\n                  color: colors[0]\n              }\n          }, {\n              r0: 140,\n              r: 145,\n              itemStyle: {\n                  shadowBlur: 80,\n                  shadowColor: colors[0]\n              },\n              label: {\n                  position: 'outside',\n                  textShadowBlur: 5,\n                  textShadowColor: '#333',\n              },\n              downplay: {\n                  label: {\n                      opacity: 0.5\n                  }\n              }\n          }]\n      }]\n  };\n\n  myChart.setOption(option);\n  \n}\n","// https://github.com/tc39/proposal-object-values-entries\nvar $export = require('./_export');\nvar $values = require('./_object-to-array')(false);\n\n$export($export.S, 'Object', {\n  values: function values(it) {\n    return $values(it);\n  }\n});\n"],"sourceRoot":""}